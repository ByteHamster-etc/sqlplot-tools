language: cpp

branches:
  only:
    - master

env:
  matrix:
    # gcc builds
    - CMAKE_CC="gcc" CMAKE_CXX="g++"         CMAKE_ARGS="-DCMAKE_BUILD_TYPE=Debug"
    - CMAKE_CC="gcc" CMAKE_CXX="g++"         CMAKE_ARGS="-DCMAKE_BUILD_TYPE=Release"
    # clang builds
    - CMAKE_CC="clang" CMAKE_CXX="clang++"   CMAKE_ARGS="-DCMAKE_BUILD_TYPE=Debug"
    - CMAKE_CC="clang" CMAKE_CXX="clang++"   CMAKE_ARGS="-DCMAKE_BUILD_TYPE=Release"

install:
  - sudo apt-get -qq update
  - sudo apt-get install libboost-all-dev

before_script:
  - mkdir build && cd build && cmake -DCMAKE_C_COMPILER=$CMAKE_CC -DCMAKE_CXX_COMPILER=$CMAKE_CXX $CMAKE_ARGS ..

script:
  - make -j4 && ctest -V
